<!DOCTYPE html>
<html lang="en" style="color: #555555">
<head>
    <meta charset="UTF-8">
    <title>Stock</title>
    <link rel="stylesheet" href="chargement_elements.css">

    <link rel="stylesheet" type="text/css" href="menu.css" />

</head>
<body style="    background-image: url('./image/fond_boulangerie.png') ; background-size: cover;
">

<div class="preload">
    <img src="image/chat.png" alt="avion" class="avion" style="position:absolute;">
    <h3 style="position:absolute;">Chargement de My Bakery...</h3>

</div>
<p style="padding-top: 50%;position: absolute; top: 0; width:100%;height: 100%;">
    Tourne l'écran dans l'autre sens
</p>
<section>
    <script src="charger.js"></script>

<img src="image/fleche.svg" style="position: absolute; bottom: 0; left: 0;width: 7em; transform: rotate(-90deg)" title="RETOUR" onclick="location='caisse.html'">

<div class="dropdown" style="float: left; position: absolute">
    <button onclick="myFunction()" class="dropbtn" style="color:#555555;background-color: orange; padding:0.5em 1em 0.5em 1em; font-size: 2em; border-radius: 1em">MENU</button>
    <div id="myDropdown" class="dropdown-content">
        <a href="./index.html">Menu principal</a>
        <a href="#" id="dwn-btn">Sauvegarder ma partie</a>
        <a href="supprimer_joueur.html">Supprimer ma partie</a>
        <a href="demandeEnregistrement_importer.html" id="seco" >Importer une partie</a>
    </div>
</div>
<script>/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown menu if the user clicks outside of it
window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        var i;
        for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
                openDropdown.classList.remove('show');
            }
        }
    }
}</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>
    var niveau_joueur = localStorage.getItem('niveau');
function tostring_item(nom_prod) {
    $.ajax({
        url: 'evolution',
        dataType: 'json',
        type: 'get',
        cache: false,
        success: function (data) {
            $(data.evolution).each(function (index, value) {
                if (index == niveau_joueur) {
                    liste_produits = value.produit;
                    keys = Object.keys(liste_produits[0]);
                    values = Object.values(liste_produits[0]);
                    for (i = 0; i <= keys.length; i++) {
                        if (keys[i] == nom_prod) {
                            console.log(keys[i]);
                            console.log(values[i]);

                        }
                        else if (keys[i] == "undefined"){

                        }
                    }

                }

            })
        }
    })
}
</script>

<div id="produits" style="float: left; margin-top: 10%">
<table style="position:relative; background-color: rgba(223,139,49, 0.75); left:8em">
    <tr style="background-color:chocolate" >
        <td style="border: solid; border-color:saddlebrown;"><input class="0" alt="pain"  type="image" src="image/pain.png" style="width: 8em; ">
        <td style="border: solid; border-color:saddlebrown;"><input class="0" alt="croissant" type="image" src="image/croissant.jpg" style="width: 8em">
        <td style="border: solid; border-color:saddlebrown;"><input class="0" alt="pain au chocolat" type="image" src="image/pain_au_chocolat.png" style="width: 8em">
        <td style="border: solid; border-color:saddlebrown;"><input class="0" alt="brioche" type="image" src="image/brioche.png" style="width: 8em">
    </tr>
    <tr style="background-color:chocolate" >
        <td style="border: solid; border-color:saddlebrown;"><input class="0" alt="chouquette"  type="image" src="image/chouquette.jpg" style="width: 8em; ">
        <td style="border: solid; border-color:saddlebrown;"><input class="2" alt="cookie" type="image" src="image/cookie.png" style="width: 8em">
        <td style="border: solid; border-color:saddlebrown;"><input class="4" alt="meringue" type="image" src="image/meringue.png" style="width: 8em">
        <td style="border: solid; border-color:saddlebrown;"><input class="6" alt="gateau au chocolat" type="image" src="image/gateau_au_chocolat.webp" style="width: 8em">
    </tr>
    <tr style="background-color:chocolate" >
        <td style="border: solid; border-color:saddlebrown;"><input class="8" alt="charlotte aux fraises"  type="image" src="image/charlotte.jpg" style="width: 8em; ">
        <td style="border: solid; border-color:saddlebrown;"><input class="9" alt="tarte au citron" type="image" src="image/tarte_citron.png" style="width: 8em">
    </tr>
</table>
<img id="presentoire" src="image/presentoire_niveau0.png" style="position: absolute ; width: 25em;bottom: 1.5em; right: 0em">
</div>
    <div class="survol">
        <div class="bulle">
            <div id="bulle" style="position: absolute;
    right:23%;
    bottom: 35%;
    background-color:white;
    text-align:center;
    width:400px;
    height:250px;
    border:2px solid #555555;
border-top-right-radius:80px 40px;
border-top-left-radius:80px 40px;
border-bottom-right-radius:80px 40px;
border-bottom-left-radius:80px 40px;
display: block; margin : auto;
">
    <span id="output" style="
font-family: ComicFighter, Georgia; /* on spécifie une autre police standard, au cas où... */
font-weight:bold;
font-size:2em;
position:relative;
top: 20px
">Nous avons obtenu les produits colorés. Encore quelques clients et nous débloquerons ceux grisés!</span>
                <span id="arrow_border" style="
width: 0;
height: 0;
line-height: 0;
border-bottom:30px solid transparent;
border-left:30px solid transparent;
border-right:30px solid #555555; /* couleur de la bordure de la bulle */
position:absolute;
bottom:-30px;
right:65px;

"></span>
                <span id="arrow_inner" style="
width: 0;
height: 0;
line-height: 0;
border-bottom:30px solid transparent;
border-left:30px solid transparent;
border-right:30px solid #555555; /* couleur de la bordure de la bulle */
position:absolute;
bottom:-25px;
right:67px;

"></span>
            </div>    </div>
        <img src="image/chat.png" style="position: absolute; display: block; right: 7em; bottom: 2em">
    </div>
    <script>
        //infobulle et image grisée
        console.log(document.getElementsByTagName("input").length);
        for (i=0; i<document.getElementsByTagName("input").length; i++){
            var elmts_classes = document.getElementsByClassName(i);
            console.log(elmts_classes)

            for (j = 0; j < elmts_classes.length ; j++){
                //console.log(document.getElementsByClassName(i)[j])
                //console.log(document.getElementsByClassName(i)[j].className)
                console.log(i+"."+j+" : " + document.getElementsByClassName(i)[j].alt)
                var nom = document.getElementsByClassName(i)[j].alt

                if (i > niveau_joueur) {

                    document.getElementsByClassName(i)[j].style.filter = "grayscale(100%)";
                    document.getElementsByClassName(i)[j].style.webkitFilter = "grayscale(100%)";
                    document.getElementsByClassName(i)[j].title = nom + " : disponible dès le niveau " + i;

                } else {
                    document.getElementsByClassName(i)[j].title = nom;
                }
            }
        }

    </script>

    <script>







    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>

        // Start file download.
        document.getElementById("dwn-btn").addEventListener("click", function(){
            location="telechargement_json_config_joueur.html"
        }, false);

    </script>
    <script>
        //présentoire boulangerie
        niveau_joueur = localStorage.getItem("niveau")
        const presentoire = document.getElementById("presentoire");

        switch (parseInt(niveau_joueur)) {
            case 0: case 1:
                presentoire.src = "./image/presentoire_niveau0.png"
                break;
            case 2: case 3:
                presentoire.src = "./image/presentoire_niveau2.png"
                break;
            case 4: case 5:
                presentoire.src = "./image/presentoire_niveau4.png"
                break;
            case 6: case 7:
                presentoire.src = "./image/presentoire_niveau6.png"
                break;
            case 8:
                presentoire.src = "./image/presentoire_niveau8.png"
                break;
            case 9:
                presentoire.src = "./image/presentoire_niveau9.png"
                break;
        }
    </script>
</section>
</body>

<style>
    .bulle {
        display:none;
    }
    .survol:hover .bulle {
        display: block;
    }
</style>

</html>