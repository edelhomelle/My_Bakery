<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ma boulangerie</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="boulangerie.css" />
<!--    <script type="text/javascript" src="./boulangerie.js"> </script>-->
    <meta name="author" content="Eloïse DELHOMELLE">
    <meta name="description" content="TD2">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
</head>

<style media="screen">
    input, button{
        padding: 7px;
        height: 40px;
    }
</style>
<body>
<form action="controleur_nom.html">
    <legend style="display: block; margin : auto;margin-top:1em;margin-bottom:0.5em;text-align: center; font-size: 5em; font-weight: 1000; text-shadow: -1px -1px white, 1px 1px #333;  color: orangered ">
        Quel est ton prénom?
    </legend>
    <input id="inpvalue" type="text" placeholder="Enter value" style="display: block; width : 10em; margin : auto;margin-top:1em;margin-bottom:0.5em;text-align: center; font-size: 3em; ">
    <button type="submit" id="btn" style="display: block; width : 10em; margin : auto;text-align: center; padding: 0em 1em 1em 1em; font-size: 3em; border-radius: 30px; background-color: orangered; text-decoration: none; color: #333333">ok</button>
</form>

</body>

<script type="text/javascript">
    const inpvalue = document.getElementById("inpvalue");
    const btn = document.getElementById("btn");
    const output = document.getElementById("output");
    btn.onclick = function () {
        const key_prenom = "prenom";
        const val_prenom = inpvalue.value;
        const key_niveau = "niveau";
        const val_niveau = 0;
        const key_bonne_reponse= "bonne_reponse";
        const val_bonne_reponse= 0;
        const key_tentative = "tentative";
        const val_tentative = 0;


        if (key_prenom && val_prenom) {
            localStorage.setItem(key_prenom, val_prenom);
            localStorage.setItem(key_niveau, val_niveau);
            localStorage.setItem(key_bonne_reponse, val_bonne_reponse);
            localStorage.setItem(key_tentative, val_tentative);
            location.reload();
        }

      /* let objJson = {
            prenom: inpvalue.value,
            niveau: 0
        }
        let objLinea = JSON.stringify(objJson);
        localStorage.setItem("joueur", objLinea);
        const fs = require('fs')

        fs.writeFile('joueur.json', objLinea, function(erreur) {
            if (erreur) {
                console.log(erreur)}
        })*/
    };

    /*btn.onclick = function () {
        console.log(localStorage.getItem("prenom"));
        console.log(inpvalue.value);
        if (localStorage.getItem("prenom") != inpvalue.value){
            console.log("empty");
            //add_name();
            add_json();
        }
        else{
            console.log("ce prénom est déjà utilisé");
            alert("Il y a déjà un joueur qui porte ce nom, vérifie dans les parties enregistrées. Sinon, tu peux écrire un autre prénom pour commencer une nouvelle partie.")
        }
    };*/

    function add_name() {
        const key = "prenom";
        const value = inpvalue.value;
        if (key && value) {
            localStorage.setItem(key, value);
            //location.reload();
        }
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            const value = localStorage.getItem(key);
            output.innerHTML += `${key}: ${value} <br />`;
        }
    }

    function add_json() {
        let objJson = {
            prenom: inpvalue.value,
            niveau: 0
        }
        let objLinea = JSON.stringify(objJson);
        localStorage.setItem("joueur", objLinea);
    }

</script>
</html>