<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ma boulangerie</title>
    <meta name="author" content="Eloïse DELHOMELLE">
    <meta name="description" content="Projet individuel">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta http-equiv="Cache-control" content="public" max-age="31536000">
    <link rel="stylesheet" type="text/css" href="boulangerie.css" />
    <link rel="stylesheet" href="chargement_elements.css">

</head>

<body style="background-image: url('./image/fond_boulangerie.png')">
<p style="position: absolute; top: 0;">
    Tourne l'écran dans l'autre sens
</p>
<div class="preload">
    <img src="image/chat.png" alt="chat_chargement" class="avion">
    <h3>Chargement de My Bakery...</h3>
</div>
<section>
    <script src="charger.js"></script>
<input type="file" style="font-size: 3em; background-color: orangered; color: #555555; padding: 2em; display: block; margin: auto; margin-top: 15%">

<script>
    const input = document.querySelector('input[type="file')
    input.addEventListener('change', function (e) {
        console.log("input.files : "+input.files)
        const reader = new FileReader()

        reader.onload = receivedText;

        reader.readAsText(input.files[0])
    }, false)
    function receivedText(e) {
        let lines = e.target.result;
        console.log(lines)
        data =  JSON.stringify(lines);
        console.log("JSON.stringify(lines) : "+data)
        newArr = JSON.parse(lines);
        // var newArr = JSON.parse(lines);
        console.log("newArr : "+newArr)
        console.log("newArr.prenom : " +newArr.prenom)
        console.log("newArr.niveau : "+newArr.niveau)
        console.log("newArr.tentative : "+newArr.tentative)
        console.log("newArr.bonne_reponse : "+newArr.bonne_reponse)
        console.log("newArr.pieces : "+newArr.pieces)
        console.log("newArr.liste_biens : "+newArr.liste_biens)
        localStorage.setItem('prenom', newArr.prenom)
        localStorage.setItem('niveau', newArr.niveau)
        localStorage.setItem('tentative', newArr.tentative)
        localStorage.setItem('bonne_reponse', newArr.bonne_reponse)
        localStorage.setItem('pieces', newArr.pieces)
        location = "debut_jeu.html"

    }


</script></section>
</body></html>