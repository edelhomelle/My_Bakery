<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ma boulangerie</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="boulangerie.css" />
    <!--    <script type="text/javascript" src="./boulangerie.js"> </script>-->
    <meta name="author" content="Eloïse DELHOMELLE">
    <meta name="description" content="TD2">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <link rel="stylesheet" href="chargement_elements.css">

</head>

<body style="background-image: url('./image/fond_boulangerie.png')">
<p style="position: absolute; top: 0;">
    Tourne l'écran dans l'autre sens
</p>
<div class="preload">
    <img src="image/chat.png" alt="avion" class="avion">
    <h3>Chargement de My Bakery...</h3>
</div>
<section>
    <script src="charger.js"></script>
<input type="file" style="font-size: 3em; background-color: orangered; color: #555555; padding: 2em; display: block; margin: auto; margin-top: 15%">

<script>
    const input = document.querySelector('input[type="file')
    input.addEventListener('change', function (e) {
        console.log(input.files)
        const reader = new FileReader()
        reader.onload = function () {
            console.log(reader.result)
            data = reader.result
            console.log(data)
            recup_attributs_json =  JSON.stringify(data);
            console.log(recup_attributs_json)
            recup = JSON.parse(recup_attributs_json)
            console.log(recup)
            console.log(recup_attributs_json.prenom)

        }
        reader.onload = receivedText;

        reader.readAsText(input.files[0])
    }, false)
    function receivedText(e) {
        let lines = e.target.result;
        console.log(lines)
        data =  JSON.stringify(lines);
        console.log(data)
        newArr = JSON.parse(lines);
        // var newArr = JSON.parse(lines);
        console.log(newArr)
        console.log(newArr.prenom)
        console.log(newArr.niveau)
        console.log(newArr.tentative)
        console.log(newArr.bonne_reponse)
        localStorage.setItem('prenom', newArr.prenom)
        localStorage.setItem('niveau', newArr.niveau)
        localStorage.setItem('tentative', newArr.tentative)
        localStorage.setItem('bonne_reponse', newArr.bonne_reponse)
        localStorage.setItem('pieces', newArr.pieces)
        location = "debut_jeu.html"


    }


</script></section>
</body></html>